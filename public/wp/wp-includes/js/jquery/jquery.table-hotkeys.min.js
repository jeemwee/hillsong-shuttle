!function(e){e.fn.filter_visible=function(t){t=t||3;return this.filter(function(){var r,n=e(this);for(r=0;r<t-1;++r){if(!n.is(":visible"))return!1;n=n.parent()}return!0})},e.table_hotkeys=function(t,r,n){n=e.extend(e.table_hotkeys.defaults,n);var i,s,_,o,c,l,u,h,a,f,k,y,p;i=n.class_prefix+n.selected_suffix,s=n.class_prefix+n.destructive_suffix,_=function(t){e.table_hotkeys.current_row&&e.table_hotkeys.current_row.removeClass(i),t.addClass(i),t[0].scrollIntoView(!1),e.table_hotkeys.current_row=t},o=function(t){!l(t)&&e.isFunction(n[t+"_page_link_cb"])&&n[t+"_page_link_cb"]()},c=function(t){var r;return e.table_hotkeys.current_row?("prev"==t?e.fn.prevAll:e.fn.nextAll).call(e.table_hotkeys.current_row,n.cycle_expr).filter_visible()[0]:(r=f(),e.table_hotkeys.current_row=r,r[0])},l=function(t){var r=c(t);return!!r&&(_(e(r)),!0)},u=function(){return l("prev")},h=function(){return l("next")},a=function(){e(n.checkbox_expr,e.table_hotkeys.current_row).each(function(){this.checked=!this.checked})},k=function(){var r=e(n.cycle_expr,t).filter_visible();return r.eq(r.length-1)},y=function(t){return function(){if(null==e.table_hotkeys.current_row)return!1;var r=e(t,e.table_hotkeys.current_row);if(!r.length)return!1;r.is("."+s)&&(h()||u()),r.click()}},(p=(f=function(){return e(n.cycle_expr,t).filter_visible().eq(n.start_row_index)})()).length&&(n.highlight_first?_(p):n.highlight_last&&_(k()),e.hotkeys.add(n.prev_key,n.hotkeys_opts,function(){return o("prev")}),e.hotkeys.add(n.next_key,n.hotkeys_opts,function(){return o("next")}),e.hotkeys.add(n.mark_key,n.hotkeys_opts,a),e.each(r,function(){var t,r;e.isFunction(this[1])?(t=this[1],r=this[0],e.hotkeys.add(r,n.hotkeys_opts,function(r){return t(r,e.table_hotkeys.current_row)})):(r=this,e.hotkeys.add(r,n.hotkeys_opts,y("."+n.class_prefix+r)))}))},e.table_hotkeys.current_row=null,e.table_hotkeys.defaults={cycle_expr:"tr",class_prefix:"vim-",selected_suffix:"current",destructive_suffix:"destructive",hotkeys_opts:{disableInInput:!0,type:"keypress"},checkbox_expr:":checkbox",next_key:"j",prev_key:"k",mark_key:"x",start_row_index:2,highlight_first:!1,highlight_last:!1,next_page_link_cb:!1,prev_page_link_cb:!1}}(jQuery);