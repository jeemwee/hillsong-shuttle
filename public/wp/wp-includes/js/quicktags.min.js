function quicktags(t){return new QTags(t)}function edInsertContent(t,n){return QTags.insertContent(n)}function edButton(t,n,e,o,a){return QTags.addButton(t,n,e,o,a,"",-1)}var QTags,edCanvas,edButtons=[],edAddTag=function(){},edCheckOpenTags=function(){},edCloseAllTags=function(){},edInsertImage=function(){},edInsertLink=function(){},edInsertTag=function(){},edLink=function(){},edQuickLink=function(){},edRemoveTag=function(){},edShowButton=function(){},edShowLinks=function(){},edSpell=function(){},edToolbar=function(){};!function(){var t,n=function(t){var e,o,a,i;"undefined"!=typeof jQuery?jQuery(document).ready(t):((e=n).funcs=[],e.ready=function(){if(!e.isReady)for(e.isReady=!0,o=0;o<e.funcs.length;o++)e.funcs[o]()},e.isReady?t():e.funcs.push(t),e.eventAttached||(document.addEventListener?(a=function(){document.removeEventListener("DOMContentLoaded",a,!1),e.ready()},document.addEventListener("DOMContentLoaded",a,!1),window.addEventListener("load",e.ready,!1)):document.attachEvent&&(a=function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",a),e.ready())},document.attachEvent("onreadystatechange",a),window.attachEvent("onload",e.ready),(i=function(){try{document.documentElement.doScroll("left")}catch(t){return void setTimeout(i,50)}e.ready()})()),e.eventAttached=!0))},e=function(){var t,n=new Date;return t=function(t){var n=t.toString();return n.length<2&&(n="0"+n),n},n.getUTCFullYear()+"-"+t(n.getUTCMonth()+1)+"-"+t(n.getUTCDate())+"T"+t(n.getUTCHours())+":"+t(n.getUTCMinutes())+":"+t(n.getUTCSeconds())+"+00:00"}();(t=QTags=function(e){if("string"==typeof e)e={id:e};else if("object"!=typeof e)return!1;var o,a,i,u=this,s=e.id,c=document.getElementById(s),l="qt_"+s;if(!s||!c)return!1;u.name=l,u.id=s,u.canvas=c,u.settings=e,"content"!==s||"string"!=typeof adminpage||"post-new-php"!==adminpage&&"post-php"!==adminpage?i=l+"_toolbar":(edCanvas=c,i="ed_toolbar"),(o=document.createElement("div")).id=i,o.className="quicktags-toolbar",o.onclick=function(){window.wpActiveEditor=s},c.parentNode.insertBefore(o,c),u.toolbar=o,a=function(t){var n,e=(t=t||window.event).target||t.srcElement;(e.clientWidth||e.offsetWidth)&&/ ed_button /.test(" "+e.className+" ")&&(u.canvas=c=document.getElementById(s),n=e.id.replace(l+"_",""),u.theButtons[n]&&u.theButtons[n].callback.call(u.theButtons[n],e,c,u))},o.addEventListener?o.addEventListener("click",a,!1):o.attachEvent&&o.attachEvent("onclick",a),u.getButton=function(t){return u.theButtons[t]},u.getButtonElement=function(t){return document.getElementById(l+"_"+t)},t.instances[s]=u,t.instances[0]||(t.instances[0]=t.instances[s],n(function(){t._buttonsInit()}))}).instances={},t.getInstance=function(n){return t.instances[n]},t._buttonsInit=function(){var n,e,o,a,i,u,s,c,l,r=this;for(i in r.instances)if(0!==i){(u=r.instances[i]).canvas,n=u.name,a="",o={},l="",(e=u.settings).buttons&&(l=","+e.buttons+",");for(c in edButtons)edButtons[c]&&(s=edButtons[c].id,l&&-1!==",strong,em,link,block,del,ins,img,ul,ol,li,code,more,close,".indexOf(","+s+",")&&-1===l.indexOf(","+s+",")||edButtons[c].instance&&edButtons[c].instance!==i||(o[s]=edButtons[c],edButtons[c].html&&(a+=edButtons[c].html(n+"_"))));l&&-1!==l.indexOf(",fullscreen,")&&(o.fullscreen=new t.FullscreenButton,a+=o.fullscreen.html(n+"_")),"rtl"===document.getElementsByTagName("html")[0].dir&&(o.textdirection=new t.TextDirectionButton,a+=o.textdirection.html(n+"_")),u.toolbar.innerHTML=a,u.theButtons=o}r.buttonsInitDone=!0},t.addButton=function(n,e,o,a,i,u,s,c){var l;if(n&&e){if(s=s||0,a=a||"","function"==typeof o)(l=new t.Button(n,e,i,u,c)).callback=o;else{if("string"!=typeof o)return;l=new t.TagButton(n,e,o,a,i,u,c)}if(-1===s)return l;if(s>0){for(;void 0!==edButtons[s];)s++;edButtons[s]=l}else edButtons[edButtons.length]=l;this.buttonsInitDone&&this._buttonsInit()}},t.insertContent=function(t){var n,e,o,a,i=document.getElementById(wpActiveEditor);return!!i&&(document.selection?(i.focus(),document.selection.createRange().text=t,i.focus()):i.selectionStart||0===i.selectionStart?(a=i.value,n=i.selectionStart,e=i.selectionEnd,o=i.scrollTop,i.value=a.substring(0,n)+t+a.substring(e,a.length),i.focus(),i.selectionStart=n+t.length,i.selectionEnd=n+t.length,i.scrollTop=o):(i.value+=t,i.focus()),!0)},t.Button=function(t,n,e,o,a){var i=this;i.id=t,i.display=n,i.access=e,i.title=o||"",i.instance=a||""},t.Button.prototype.html=function(t){var n=this.access?' accesskey="'+this.access+'"':"";return"fullscreen"===this.id?'<button type="button" id="'+t+this.id+'"'+n+' class="ed_button qt-fullscreen" title="'+this.title+'"></button>':'<input type="button" id="'+t+this.id+'"'+n+' class="ed_button button button-small" title="'+this.title+'" value="'+this.display+'" />'},t.Button.prototype.callback=function(){},t.TagButton=function(n,e,o,a,i,u,s){var c=this;t.Button.call(c,n,e,i,u,s),c.tagStart=o,c.tagEnd=a},t.TagButton.prototype=new t.Button,t.TagButton.prototype.openTag=function(t,n){n.openTags||(n.openTags=[]),this.tagEnd&&(n.openTags.push(this.id),t.value="/"+t.value)},t.TagButton.prototype.closeTag=function(t,n){var e=this.isOpen(n);!1!==e&&n.openTags.splice(e,1),t.value=this.display},t.TagButton.prototype.isOpen=function(t){var n=0,e=!1;if(t.openTags)for(;!1===e&&n<t.openTags.length;)e=t.openTags[n]===this.id&&n,n++;else e=!1;return e},t.TagButton.prototype.callback=function(t,n,e){var o,a,i,u,s,c,l,r,d=this,g=n.value,f=g?d.tagEnd:"";document.selection?(n.focus(),(r=document.selection.createRange()).text.length>0?d.tagEnd?r.text=d.tagStart+r.text+f:r.text=r.text+d.tagStart:d.tagEnd?!1===d.isOpen(e)?(r.text=d.tagStart,d.openTag(t,e)):(r.text=f,d.closeTag(t,e)):r.text=d.tagStart,n.focus()):n.selectionStart||0===n.selectionStart?(o=n.selectionStart,i=a=n.selectionEnd,u=n.scrollTop,s=g.substring(0,o),c=g.substring(a,g.length),l=g.substring(o,a),o!==a?d.tagEnd?(n.value=s+d.tagStart+l+f+c,i+=d.tagStart.length+f.length):(n.value=s+l+d.tagStart+c,i+=d.tagStart.length):d.tagEnd?!1===d.isOpen(e)?(n.value=s+d.tagStart+c,d.openTag(t,e),i=o+d.tagStart.length):(n.value=s+f+c,i=o+f.length,d.closeTag(t,e)):(n.value=s+d.tagStart+c,i=o+d.tagStart.length),n.focus(),n.selectionStart=i,n.selectionEnd=i,n.scrollTop=u):(f?!1!==d.isOpen(e)?(n.value+=d.tagStart,d.openTag(t,e)):(n.value+=f,d.closeTag(t,e)):n.value+=d.tagStart,n.focus())},t.SpellButton=function(){},t.CloseButton=function(){t.Button.call(this,"close",quicktagsL10n.closeTags,"",quicktagsL10n.closeAllOpenTags)},t.CloseButton.prototype=new t.Button,t._close=function(t,n,e){var o,a,i=e.openTags;if(i)for(;i.length>0;)o=e.getButton(i[i.length-1]),a=document.getElementById(e.name+"_"+o.id),t?o.callback.call(o,a,n,e):o.closeTag(a,e)},t.CloseButton.prototype.callback=t._close,t.closeAllTags=function(n){var e=this.getInstance(n);t._close("",e.canvas,e)},t.LinkButton=function(){t.TagButton.call(this,"link","link","","</a>","a")},t.LinkButton.prototype=new t.TagButton,t.LinkButton.prototype.callback=function(n,e,o,a){var i,u=this;"undefined"==typeof wpLink?(a||(a="http://"),!1===u.isOpen(o)?(i=prompt(quicktagsL10n.enterURL,a))&&(u.tagStart='<a href="'+i+'">',t.TagButton.prototype.callback.call(u,n,e,o)):t.TagButton.prototype.callback.call(u,n,e,o)):wpLink.open(o.id)},t.ImgButton=function(){t.TagButton.call(this,"img","img","","","m")},t.ImgButton.prototype=new t.TagButton,t.ImgButton.prototype.callback=function(n,e,o,a){a||(a="http://");var i,u=prompt(quicktagsL10n.enterImageURL,a);u&&(i=prompt(quicktagsL10n.enterImageDescription,""),this.tagStart='<img src="'+u+'" alt="'+i+'" />',t.TagButton.prototype.callback.call(this,n,e,o))},t.FullscreenButton=function(){t.Button.call(this,"fullscreen",quicktagsL10n.fullscreen,"f",quicktagsL10n.toggleFullscreen)},t.FullscreenButton.prototype=new t.Button,t.FullscreenButton.prototype.callback=function(t,n){n.id&&"undefined"!=typeof wp&&wp.editor&&wp.editor.fullscreen&&wp.editor.fullscreen.on()},t.TextDirectionButton=function(){t.Button.call(this,"textdirection",quicktagsL10n.textdirection,"",quicktagsL10n.toggleTextdirection)},t.TextDirectionButton.prototype=new t.Button,t.TextDirectionButton.prototype.callback=function(t,n){var e="rtl"===document.getElementsByTagName("html")[0].dir,o=n.style.direction;o||(o=e?"rtl":"ltr"),n.style.direction="rtl"===o?"ltr":"rtl",n.focus()},edButtons[10]=new t.TagButton("strong","b","<strong>","</strong>","b"),edButtons[20]=new t.TagButton("em","i","<em>","</em>","i"),edButtons[30]=new t.LinkButton,edButtons[40]=new t.TagButton("block","b-quote","\n\n<blockquote>","</blockquote>\n\n","q"),edButtons[50]=new t.TagButton("del","del",'<del datetime="'+e+'">',"</del>","d"),edButtons[60]=new t.TagButton("ins","ins",'<ins datetime="'+e+'">',"</ins>","s"),edButtons[70]=new t.ImgButton,edButtons[80]=new t.TagButton("ul","ul","<ul>\n","</ul>\n\n","u"),edButtons[90]=new t.TagButton("ol","ol","<ol>\n","</ol>\n\n","o"),edButtons[100]=new t.TagButton("li","li","\t<li>","</li>\n","l"),edButtons[110]=new t.TagButton("code","code","<code>","</code>","c"),edButtons[120]=new t.TagButton("more","more","\x3c!--more--\x3e\n\n","","t"),edButtons[140]=new t.CloseButton}();