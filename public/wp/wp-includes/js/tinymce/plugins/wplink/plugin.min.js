tinymce.PluginManager.add("wplink",function(n){function t(t,i){var e=n.dom.getParent(i,"a"),o=n.plugins.wpview?n.plugins.wpview.getView:function(){return!1};t.disabled(n.selection.isCollapsed()&&!e||e&&!e.href||o(i)),t.active(e&&e.href)}var i;n.addCommand("WP_Link",function(){i&&i.disabled()||void 0===window.wpLink||window.wpLink.open(n.id)}),n.addShortcut("alt+shift+a","","WP_Link"),n.addShortcut("ctrl+k","","WP_Link"),n.addButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Alt+Shift+A",cmd:"WP_Link",onPostRender:function(){i=this,n.on("nodechange",function(n){t(i,n.element)})}}),n.addButton("unlink",{icon:"unlink",tooltip:"Remove link",cmd:"unlink",onPostRender:function(){var i=this;n.on("nodechange",function(n){t(i,n.element)})}}),n.addMenuItem("link",{icon:"link",text:"Insert link",shortcut:"Alt+Shift+A",cmd:"WP_Link",stateSelector:"a[href]",context:"insert",prependToContext:!0})});