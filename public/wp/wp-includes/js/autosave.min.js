window.autosave=function(){return!0},function(t,e){function n(){function n(e){var n,o,a,s=(new Date).getTime(),i=[],r="undefined"!=typeof tinymce&&tinymce.get("content");return r&&!r.isHidden()&&s-3e3>u&&(r.save(),u=s),a={post_id:t("#post_ID").val()||0,post_type:t("#post_type").val()||"",post_author:t("#post_author").val()||"",post_title:t("#title").val()||"",content:t("#content").val()||"",excerpt:t("#excerpt").val()||""},"local"===e?a:(t('input[id^="in-category-"]:checked').each(function(){i.push(this.value)}),a.catslist=i.join(","),(n=t("#post_name").val())&&(a.post_name=n),(o=t("#parent_id").val())&&(a.parent_id=o),t("#comment_status").prop("checked")&&(a.comment_status="open"),t("#ping_status").prop("checked")&&(a.ping_status="open"),"1"===t("#auto_draft").val()&&(a.auto_draft="1"),a)}function o(e){return"object"==typeof e?(e.post_title||"")+"::"+(e.content||"")+"::"+(e.excerpt||""):(t("#title").val()||"")+"::"+(t("#content").val()||"")+"::"+(t("#excerpt").val()||"")}function a(){p.trigger("autosave-disable-buttons"),setTimeout(s,5e3)}function s(){p.trigger("autosave-enable-buttons")}function i(){function a(){var t=!1;return w&&g&&(t=(t=sessionStorage.getItem("wp-autosave-"+g))?JSON.parse(t):{}),t}function s(){var t=a();return!(!t||!m)&&(t["post_"+m]||!1)}function i(t){var e=a();if(!e||!m)return!1;if(t)e["post_"+m]=t;else{if(!e.hasOwnProperty("post_"+m))return!1;delete e["post_"+m]}return function(t){var e;return!(!w||!g)&&(e="wp-autosave-"+g,sessionStorage.setItem(e,JSON.stringify(t)),null!==sessionStorage.getItem(e))}(e)}function r(e){var a,r,u=!1;return!(y||!w)&&(e?(a=s()||{},t.extend(a,e)):a=n("local"),r=o(a),void 0===_&&(_=c),r!==_&&(a.save_time=(new Date).getTime(),a.status=t("#post_status").val()||"",(u=i(a))&&(_=r),u))}function u(t,e){function n(t){return t.toString().replace(/[\x20\t\r\n\f]+/g,"")}return n(t||"")===n(e||"")}function v(){var e,n,o,a,r=s();if(wpCookies.get("wp-saving-post")===m+"-saved")return wpCookies.remove("wp-saving-post"),void i(!1);r&&(t("#has-newer-autosave").length||(e=t("#content").val()||"",n=t("#title").val()||"",o=t("#excerpt").val()||"",u(e,r.content)&&u(n,r.post_title)&&u(o,r.excerpt)||(f=r,d={content:e,post_title:n,excerpt:o},a=t("#local-storage-notice"),t(".wrap h2").first().after(a.addClass("updated").show()),a.on("click.autosave-local",function(e){var n=t(e.target);n.hasClass("restore-backup")?(l(f),n.parent().hide(),t(this).find("p.undo-restore").show()):n.hasClass("undo-restore-backup")&&(l(d),n.parent().hide(),t(this).find("p.local-restore").show()),e.preventDefault()}))))}function l(e){var n;return!!e&&(_=o(e),t("#title").val()!==e.post_title&&t("#title").focus().val(e.post_title||""),t("#excerpt").val(e.excerpt||""),(n="undefined"!=typeof tinymce&&tinymce.get("content"))&&!n.isHidden()&&"undefined"!=typeof switchEditors?(n.undoManager.add(),n.setContent(e.content?switchEditors.wpautop(e.content):"")):(t("#content-html").click(),t("#content").val(e.content)),!0)}var f,d,g,m,w,h,_,y=!1;return g=void 0!==e.autosaveL10n&&e.autosaveL10n.blog_id,function(){var t=Math.random().toString(),n=!1;try{e.sessionStorage.setItem("wp-test",t),n=e.sessionStorage.getItem("wp-test")===t,e.sessionStorage.removeItem("wp-test")}catch(t){}return w=n,n}()&&g&&(t("#content").length||t("#excerpt").length)&&p.ready(function(){m=t("#post_ID").val()||0,t("#wp-content-wrap").hasClass("tmce-active")?p.on("tinymce-editor-init.autosave",function(){e.setTimeout(function(){v()},1500)}):v(),h=e.setInterval(r,15e3),t("form#post").on("submit.autosave-local",function(){var e="undefined"!=typeof tinymce&&tinymce.get("content"),n=t("#post_ID").val()||0;e&&!e.isHidden()?e.on("submit",function(){r({post_title:t("#title").val()||"",content:t("#content").val()||"",excerpt:t("#excerpt").val()||""})}):r({post_title:t("#title").val()||"",content:t("#content").val()||"",excerpt:t("#excerpt").val()||""}),wpCookies.set("wp-saving-post",n+"-check",86400)})}),{hasStorage:w,getSavedPostData:s,save:r,suspend:function(){y=!0},resume:function(){y=!1}}}function r(){function i(){u=!0,e.clearTimeout(v),v=e.setTimeout(function(){u=!1},1e4)}function r(){d=(new Date).getTime()+1e3*autosaveL10n.autosaveInterval||6e4}var u,v,l,f,d=0,g=!1;return p.on("heartbeat-send.autosave",function(s,r){var v=function(){var s,r;return!(g||u||!e.autosave())&&!((new Date).getTime()<d)&&(s=n(),r=o(s),void 0===f&&(f=c),r!==f&&(l=r,i(),a(),p.trigger("wpcountwords",[s.content]).trigger("before-autosave",[s]),s._wpnonce=t("#_wpnonce").val()||"",s))}();v&&(r.wp_autosave=v)}).on("heartbeat-tick.autosave",function(e,n){n.wp_autosave&&function(e){r(),u=!1,f=l,l="",p.trigger("after-autosave",[e]),s(),e.success&&t("#auto_draft").val("")}(n.wp_autosave)}).on("heartbeat-connection-lost.autosave",function(e,n,o){if("timeout"===n||603===o){var s=t("#lost-connection-notice");wp.autosave.local.hasStorage||s.find(".hide-if-no-sessionstorage").hide(),s.show(),a()}}).on("heartbeat-connection-restored.autosave",function(){t("#lost-connection-notice").hide(),s()}).ready(function(){r()}),{tempBlockSave:i,triggerSave:function(){d=0,wp.heartbeat.connectNow()},postChanged:function(){return o()!==c},suspend:function(){g=!0},resume:function(){g=!1}}}var c,u=0,p=t(document);return p.on("tinymce-editor-init.autosave",function(t,n){"content"===n.id&&e.setTimeout(function(){n.save(),c=o()},1e3)}).ready(function(){c=o()}),{getPostData:n,getCompareString:o,disableButtons:a,enableButtons:s,local:i(),server:r()}}e.wp=e.wp||{},e.wp.autosave=n()}(jQuery,window);