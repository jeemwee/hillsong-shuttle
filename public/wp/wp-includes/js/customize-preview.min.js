!function(n,t){var e,i=wp.customize;e=function(n,t,e){var i;return function(){var o=arguments;e=e||this,clearTimeout(i),i=setTimeout(function(){i=null,n.apply(e,o)},t)}},i.Preview=i.Messenger.extend({initialize:function(n,o){var s=this;i.Messenger.prototype.initialize.call(this,n,o),this.body=t(document.body),this.body.on("click.preview","a",function(n){n.preventDefault(),s.send("scroll",0),s.send("url",t(this).prop("href"))}),this.body.on("submit.preview","form",function(n){n.preventDefault()}),this.window=t(window),this.window.on("scroll.preview",e(function(){s.send("scroll",s.window.scrollTop())},200)),this.bind("scroll",function(n){s.window.scrollTop(n)})}}),t(function(){if(i.settings=window._wpCustomizeSettings,i.settings){var n,e;(n=new i.Preview({url:window.location.href,channel:i.settings.channel})).bind("settings",function(n){t.each(n,function(n,t){i.has(n)?i(n).set(t):i.create(n,t)})}),n.trigger("settings",i.settings.values),n.bind("setting",function(n){var t;n=n.slice(),(t=i(n.shift()))&&t.set.apply(t,n)}),n.bind("sync",function(e){t.each(e,function(t,e){n.trigger(t,e)}),n.send("synced")}),n.bind("active",function(){i.settings.nonce&&n.send("nonce",i.settings.nonce)}),n.send("ready",{activeControls:i.settings.activeControls}),e=t.map(["color","image","position_x","repeat","attachment"],function(n){return"background_"+n}),i.when.apply(i,e).done(function(n,e,i,o,s){var c,r=t(document.body),a=t("head"),u=t("#custom-background-css");c=function(){var c="";r.toggleClass("custom-background",!(!n()&&!e())),n()&&(c+="background-color: "+n()+";"),e()&&(c+='background-image: url("'+e()+'");',c+="background-position: top "+i()+";",c+="background-repeat: "+o()+";",c+="background-attachment: "+s()+";"),u.remove(),u=t('<style type="text/css" id="custom-background-css">body.custom-background { '+c+" }</style>").appendTo(a)},t.each(arguments,function(){this.bind(c)})})}})}(wp,jQuery);