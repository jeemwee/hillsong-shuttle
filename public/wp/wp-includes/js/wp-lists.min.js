!function(e){var t,n={add:"ajaxAdd",del:"ajaxDel",dim:"ajaxDim",process:"process",recolor:"recolor"};t={settings:{url:ajaxurl,type:"POST",response:"ajax-response",what:"",alt:"alternate",altOffset:0,addColor:null,delColor:null,dimAddColor:null,dimDelColor:null,confirm:null,addBefore:null,addAfter:null,delBefore:null,delAfter:null,dimBefore:null,dimAfter:null},nonce:function(t,n){var s=wpAjax.unserialize(t.attr("href"));return n.nonce||s._ajax_nonce||e("#"+n.element+' input[name="_ajax_nonce"]').val()||s._wpnonce||e("#"+n.element+' input[name="_wpnonce"]').val()||0},parseData:function(t,n){var s,i=[];try{(s=(s=e(t).attr("data-wp-lists")||"").match(new RegExp(n+":[\\S]+")))&&(i=s[0].split(":"))}catch(e){}return i},pre:function(t,n,s){var i,a;return n=e.extend({},this.wpList.settings,{element:null,nonce:0,target:t.get(0)},n||{}),!(e.isFunction(n.confirm)&&("add"!=s&&(i=e("#"+n.element).css("backgroundColor"),e("#"+n.element).css("backgroundColor","#FF9966")),a=n.confirm.call(this,t,n,s,i),"add"!=s&&e("#"+n.element).css("backgroundColor",i),!a))&&n},ajaxAdd:function(n,s){n=e(n),s=s||{};var i,a,o,l,r=this,d=t.parseData(n,"add");return s=t.pre.call(r,n,s,"add"),s.element=d[2]||n.attr("id")||s.element||null,d[3]?s.addColor="#"+d[3]:s.addColor=s.addColor||"#FFFF33",!!s&&(n.is('[id="'+s.element+'-submit"]')?!s.element||(s.action="add-"+s.what,s.nonce=t.nonce(n,s),i=e("#"+s.element+" :input").not('[name="_ajax_nonce"], [name="_wpnonce"], [name="action"]'),!!wpAjax.validateForm("#"+s.element)&&(s.data=e.param(e.extend({_ajax_nonce:s.nonce,action:s.action},wpAjax.unserialize(d[4]||""))),(a=e.isFunction(i.fieldSerialize)?i.fieldSerialize():i.serialize())&&(s.data+="&"+a),!(!e.isFunction(s.addBefore)||(s=s.addBefore(s)))||(!s.data.match(/_ajax_nonce=[a-f0-9]+/)||(s.success=function(n){return o=wpAjax.parseAjaxResponse(n,s.response,s.element),l=n,!(!o||o.errors)&&(!0===o||(jQuery.each(o.responses,function(){t.add.call(r,this.data,e.extend({},s,{pos:this.position||0,id:this.id||0,oldId:this.oldId||null}))}),r.wpList.recolor(),e(r).trigger("wpListAddEnd",[s,r.wpList]),void t.clear.call(r,"#"+s.element)))},s.complete=function(t,n){if(e.isFunction(s.addAfter)){var i=e.extend({xml:t,status:n,parsed:o},s);s.addAfter(l,i)}},e.ajax(s),!1)))):!t.add.call(r,n,s))},ajaxDel:function(n,s){n=e(n),s=s||{};var i,a,o,l=this,r=t.parseData(n,"delete");return s=t.pre.call(l,n,s,"delete"),s.element=r[2]||s.element||null,r[3]?s.delColor="#"+r[3]:s.delColor=s.delColor||"#faa",!(!s||!s.element)&&(s.action="delete-"+s.what,s.nonce=t.nonce(n,s),s.data=e.extend({action:s.action,id:s.element.split("-").pop(),_ajax_nonce:s.nonce},wpAjax.unserialize(r[4]||"")),!(!e.isFunction(s.delBefore)||(s=s.delBefore(s,l)))||(!s.data._ajax_nonce||(i=e("#"+s.element),"none"!=s.delColor?i.css("backgroundColor",s.delColor).fadeOut(350,function(){l.wpList.recolor(),e(l).trigger("wpListDelEnd",[s,l.wpList])}):(l.wpList.recolor(),e(l).trigger("wpListDelEnd",[s,l.wpList])),s.success=function(t){if(a=wpAjax.parseAjaxResponse(t,s.response,s.element),o=t,!a||a.errors)return i.stop().stop().css("backgroundColor","#faa").show().queue(function(){l.wpList.recolor(),e(this).dequeue()}),!1},s.complete=function(t,n){e.isFunction(s.delAfter)&&i.queue(function(){var i=e.extend({xml:t,status:n,parsed:a},s);s.delAfter(o,i)}).dequeue()},e.ajax(s),!1)))},ajaxDim:function(n,s){if("none"==e(n).parent().css("display"))return!1;n=e(n),s=s||{};var i,a,o,l,r,d,c=this,u=t.parseData(n,"dim");return s=t.pre.call(c,n,s,"dim"),s.element=u[2]||s.element||null,s.dimClass=u[3]||s.dimClass||null,u[4]?s.dimAddColor="#"+u[4]:s.dimAddColor=s.dimAddColor||"#FFFF33",u[5]?s.dimDelColor="#"+u[5]:s.dimDelColor=s.dimDelColor||"#FF3333",!(s&&s.element&&s.dimClass)||(s.action="dim-"+s.what,s.nonce=t.nonce(n,s),s.data=e.extend({action:s.action,id:s.element.split("-").pop(),dimClass:s.dimClass,_ajax_nonce:s.nonce},wpAjax.unserialize(u[6]||"")),!(!e.isFunction(s.dimBefore)||(s=s.dimBefore(s)))||(i=e("#"+s.element),a=i.toggleClass(s.dimClass).is("."+s.dimClass),o=t.getColor(i),i.toggleClass(s.dimClass),"none"!=(l=a?s.dimAddColor:s.dimDelColor)?i.animate({backgroundColor:l},"fast").queue(function(){i.toggleClass(s.dimClass),e(this).dequeue()}).animate({backgroundColor:o},{complete:function(){e(this).css("backgroundColor",""),e(c).trigger("wpListDimEnd",[s,c.wpList])}}):e(c).trigger("wpListDimEnd",[s,c.wpList]),!s.data._ajax_nonce||(s.success=function(t){if(r=wpAjax.parseAjaxResponse(t,s.response,s.element),d=t,!r||r.errors)return i.stop().stop().css("backgroundColor","#FF3333")[a?"removeClass":"addClass"](s.dimClass).show().queue(function(){c.wpList.recolor(),e(this).dequeue()}),!1},s.complete=function(t,n){e.isFunction(s.dimAfter)&&i.queue(function(){var i=e.extend({xml:t,status:n,parsed:r},s);s.dimAfter(d,i)}).dequeue()},e.ajax(s),!1)))},getColor:function(e){return jQuery(e).css("backgroundColor")||"#ffffff"},add:function(n,s){n=e("string"==typeof n?e.trim(n):n);var i,a,o,l=e(this),r=!1;return"string"==typeof s&&(s={what:s}),s=e.extend({pos:0,id:0,oldId:null},this.wpList.settings,s),!(!n.size()||!s.what)&&(s.oldId&&(r=e("#"+s.what+"-"+s.oldId)),!s.id||s.id==s.oldId&&r&&r.size()||e("#"+s.what+"-"+s.id).remove(),r&&r.size()?(r.before(n),r.remove()):isNaN(s.pos)?(i="after","-"==s.pos.substr(0,1)&&(s.pos=s.pos.substr(1),i="before"),1===(a=l.find("#"+s.pos)).size()?a[i](n):l.append(n)):"comment"==s.what&&0!==e("#"+s.element).length||(s.pos<0?l.prepend(n):l.append(n)),s.alt&&((l.children(":visible").index(n[0])+s.altOffset)%2?n.removeClass(s.alt):n.addClass(s.alt)),"none"!=s.addColor&&(o=t.getColor(n),n.css("backgroundColor",s.addColor).animate({backgroundColor:o},{complete:function(){e(this).css("backgroundColor","")}})),l.each(function(){this.wpList.process(n)}),n)},clear:function(t){var n,s;t=e(t),this.wpList&&t.parents("#"+this.id).size()||t.find(":input").each(function(){e(this).parents(".form-no-clear").size()||(n=this.type.toLowerCase(),s=this.tagName.toLowerCase(),"text"==n||"password"==n||"textarea"==s?this.value="":"checkbox"==n||"radio"==n?this.checked=!1:"select"==s&&(this.selectedIndex=null))})},process:function(t){var n=this,s=e(t||document);s.delegate('form[data-wp-lists^="add:'+n.id+':"]',"submit",function(){return n.wpList.add(this)}),s.delegate('a[data-wp-lists^="add:'+n.id+':"], input[data-wp-lists^="add:'+n.id+':"]',"click",function(){return n.wpList.add(this)}),s.delegate('[data-wp-lists^="delete:'+n.id+':"]',"click",function(){return n.wpList.del(this)}),s.delegate('[data-wp-lists^="dim:'+n.id+':"]',"click",function(){return n.wpList.dim(this)})},recolor:function(){var t,n;this.wpList.settings.alt&&((t=e(".list-item:visible",this)).size()||(t=e(this).children(":visible")),n=[":even",":odd"],this.wpList.settings.altOffset%2&&n.reverse(),t.filter(n[0]).addClass(this.wpList.settings.alt).end().filter(n[1]).removeClass(this.wpList.settings.alt))},init:function(){var e=this;e.wpList.process=function(t){e.each(function(){this.wpList.process(t)})},e.wpList.recolor=function(){e.each(function(){this.wpList.recolor()})}}},e.fn.wpList=function(s){return this.each(function(){var i=this;this.wpList={settings:e.extend({},t.settings,{what:t.parseData(this,"list")[1]||""},s)},e.each(n,function(e,n){i.wpList[e]=function(e,s){return t[n].call(i,e,s)}})}),t.init.call(this),this.wpList.process(),this}}(jQuery);