function array_unique_noempty(t){var e=[];return jQuery.each(t,function(t,i){(i=jQuery.trim(i))&&-1==jQuery.inArray(i,e)&&e.push(i)}),e}var tagBox,commentsBox,WPSetThumbnailHTML,WPSetThumbnailID,WPRemoveThumbnail,wptitlehint,makeSlugeditClickable,editPermalink;makeSlugeditClickable=editPermalink=function(){},window.wp=window.wp||{},function(t){var e=!1;tagBox={clean:function(t){var e=postL10n.comma;return","!==e&&(t=t.replace(new RegExp(e,"g"),",")),t=t.replace(/\s*,\s*/g,",").replace(/,+/g,",").replace(/[,\s]+$/,"").replace(/^[,\s]+/,""),","!==e&&(t=t.replace(/,/g,e)),t},parseTags:function(e){var i=e.id.split("-check-num-")[1],s=t(e).closest(".tagsdiv"),a=s.find(".the-tags"),n=postL10n.comma,o=a.val().split(n),l=[];return delete o[i],t.each(o,function(e,i){(i=t.trim(i))&&l.push(i)}),a.val(this.clean(l.join(n))),this.quickClicks(s),!1},quickClicks:function(e){var i,s,a=t(".the-tags",e),n=t(".tagchecklist",e),o=t(e).attr("id");a.length&&(s=a.prop("disabled"),i=a.val().split(postL10n.comma),n.empty(),t.each(i,function(e,i){var a,l;(i=t.trim(i))&&(a=t("<span />").text(i),s||((l=t('<a id="'+o+"-check-num-"+e+'" class="ntdelbutton">X</a>')).click(function(){tagBox.parseTags(this)}),a.prepend("&nbsp;").prepend(l)),n.append(a))}))},flushTags:function(e,i,s){var a,n,o,l=t(".the-tags",e),c=t("input.newtag",e),r=postL10n.comma;return i=i||!1,o=i?t(i).text():c.val(),a=l.val(),n=a?a+r+o:o,n=this.clean(n),n=array_unique_noempty(n.split(r)).join(r),l.val(n),this.quickClicks(e),i||c.val(""),void 0===s&&c.focus(),!1},get:function(e){var i=e.substr(e.indexOf("-")+1);t.post(ajaxurl,{action:"get-tagcloud",tax:i},function(s,a){0!==s&&"success"==a||(s=wpAjax.broken),s=t('<p id="tagcloud-'+i+'" class="the-tagcloud">'+s+"</p>"),t("a",s).click(function(){return tagBox.flushTags(t(this).closest(".inside").children(".tagsdiv"),this),!1}),t("#"+e).after(s)})},init:function(){var e=this,i=t("div.ajaxtag");t(".tagsdiv").each(function(){tagBox.quickClicks(this)}),t("input.tagadd",i).click(function(){e.flushTags(t(this).closest(".tagsdiv"))}),t("div.taghint",i).click(function(){t(this).css("visibility","hidden").parent().siblings(".newtag").focus()}),t("input.newtag",i).blur(function(){""===this.value&&t(this).parent().siblings(".taghint").css("visibility","")}).focus(function(){t(this).parent().siblings(".taghint").css("visibility","hidden")}).keyup(function(e){if(13==e.which)return tagBox.flushTags(t(this).closest(".tagsdiv")),!1}).keypress(function(t){if(13==t.which)return t.preventDefault(),!1}).each(function(){var e=t(this).closest("div.tagsdiv").attr("id");t(this).suggest(ajaxurl+"?action=ajax-tag-search&tax="+e,{delay:500,minchars:2,multiple:!0,multipleSep:postL10n.comma+" "})}),t("#post").submit(function(){t("div.tagsdiv").each(function(){tagBox.flushTags(this,!1,1)})}),t("a.tagcloud-link").click(function(){return tagBox.get(t(this).attr("id")),t(this).unbind().click(function(){return t(this).siblings(".the-tagcloud").toggle(),!1}),!1})}},commentsBox={st:0,get:function(e,i){var s,a=this.st;return i||(i=20),this.st+=i,this.total=e,t("#commentsdiv .spinner").show(),s={action:"get-comments",mode:"single",_ajax_nonce:t("#add_comment_nonce").val(),p:t("#post_ID").val(),start:a,number:i},t.post(ajaxurl,s,function(e){if(e=wpAjax.parseAjaxResponse(e),t("#commentsdiv .widefat").show(),t("#commentsdiv .spinner").hide(),"object"==typeof e&&e.responses[0])return t("#the-comment-list").append(e.responses[0].data),theList=theExtraList=null,t("a[className*=':']").unbind(),void(commentsBox.st>commentsBox.total?t("#show-comments").hide():t("#show-comments").show().children("a").html(postL10n.showcomm));1!=e?t("#the-comment-list").append('<tr><td colspan="2">'+wpAjax.broken+"</td></tr>"):t("#show-comments").html(postL10n.endcomm)}),!1}},WPSetThumbnailHTML=function(e){t(".inside","#postimagediv").html(e)},WPSetThumbnailID=function(e){var i=t('input[value="_thumbnail_id"]',"#list-table");i.size()>0&&t("#meta\\["+i.attr("id").match(/[0-9]+/)+"\\]\\[value\\]").text(e)},WPRemoveThumbnail=function(e){t.post(ajaxurl,{action:"set-post-thumbnail",post_id:t("#post_ID").val(),thumbnail_id:-1,_ajax_nonce:e,cookie:encodeURIComponent(document.cookie)},function(t){"0"==t?alert(setPostThumbnailL10n.error):WPSetThumbnailHTML(t)})},t(document).on("heartbeat-send.refresh-lock",function(e,i){var s=t("#active_post_lock").val(),a=t("#post_ID").val(),n={};a&&t("#post-lock-dialog").length&&(n.post_id=a,s&&(n.lock=s),i["wp-refresh-post-lock"]=n)}).on("heartbeat-tick.refresh-lock",function(e,i){var s,a,n;i["wp-refresh-post-lock"]&&((s=i["wp-refresh-post-lock"]).lock_error?(a=t("#post-lock-dialog")).length&&!a.is(":visible")&&(wp.autosave&&(t(document).one("heartbeat-tick",function(){wp.autosave.server.suspend(),a.removeClass("saving").addClass("saved"),t(window).off("beforeunload.edit-post")}),a.addClass("saving"),wp.autosave.server.triggerSave()),s.lock_error.avatar_src&&(n=t('<img class="avatar avatar-64 photo" width="64" height="64" />').attr("src",s.lock_error.avatar_src.replace(/&amp;/g,"&")),a.find("div.post-locked-avatar").empty().append(n)),a.show().find(".currently-editing").text(s.lock_error.text),a.find(".wp-tab-first").focus()):s.new_lock&&t("#active_post_lock").val(s.new_lock))}).on("before-autosave.update-post-slug",function(){e=document.activeElement&&"title"===document.activeElement.id}).on("after-autosave.update-post-slug",function(){t("#edit-slug-box > *").length||e||t.post(ajaxurl,{action:"sample-permalink",post_id:t("#post_ID").val(),new_title:t("#title").val(),samplepermalinknonce:t("#samplepermalinknonce").val()},function(e){"-1"!=e&&t("#edit-slug-box").html(e)})})}(jQuery),function(t){function e(){i=!1,window.clearTimeout(s),s=window.setTimeout(function(){i=!0},3e5)}var i,s;t(document).on("heartbeat-send.wp-refresh-nonces",function(e,s){var a,n;i&&(n=t("#post_ID").val())&&(a=t("#_wpnonce").val())&&(s["wp-refresh-post-nonces"]={post_id:n,post_nonce:a})}).on("heartbeat-tick.wp-refresh-nonces",function(i,s){var a=s["wp-refresh-post-nonces"];a&&(e(),a.replace&&t.each(a.replace,function(e,i){t("#"+e).val(i)}),a.heartbeatNonce&&(window.heartbeatSettings.nonce=a.heartbeatNonce))}).ready(function(){e()})}(jQuery),jQuery(document).ready(function(t){var e,i,s,a,n,o="",l=0,c=t("#content"),r=t(document),p=t("#edit-slug-box"),d=t("#post_ID").val()||0,u=t("#submitpost"),h=!0,v=t("#post-visibility-select"),f=t("#timestampdiv"),m=t("#post-status-select");postboxes.add_postbox_toggles(pagenow),window.name="",t("#post-lock-dialog .notification-dialog").on("keydown",function(e){if(9==e.which){var i=t(e.target);i.hasClass("wp-tab-first")&&e.shiftKey?(t(this).find(".wp-tab-last").focus(),e.preventDefault()):i.hasClass("wp-tab-last")&&!e.shiftKey&&(t(this).find(".wp-tab-first").focus(),e.preventDefault())}}).filter(":visible").find(".wp-tab-first").focus(),wp.heartbeat&&t("#post-lock-dialog").length&&wp.heartbeat.interval(15),s=u.find(":button, :submit, a.submitdelete, #post-preview").on("click.edit-post",function(e){var i=t(this);i.hasClass("disabled")?e.preventDefault():i.hasClass("submitdelete")||i.is("#post-preview")||t("form#post").off("submit.edit-post").on("submit.edit-post",function(e){e.isDefaultPrevented()||(wp.autosave&&wp.autosave.server.suspend(),h=!1,t(window).off("beforeunload.edit-post"),s.addClass("disabled"),"publish"===i.attr("id")?u.find("#major-publishing-actions .spinner").show():u.find("#minor-publishing .spinner").show())})}),t("#post-preview").on("click.post-preview",function(e){var i=t(this),s=t("form#post"),a=t("input#wp-preview"),n=i.attr("target")||"wp-preview",o=navigator.userAgent.toLowerCase();e.preventDefault(),i.hasClass("disabled")||(wp.autosave&&wp.autosave.server.tempBlockSave(),a.val("dopreview"),s.attr("target",n).submit().attr("target",""),-1!==o.indexOf("safari")&&-1===o.indexOf("chrome")&&s.attr("action",function(t,e){return e+"?t="+(new Date).getTime()}),a.val(""))}),t("#title").on("keydown.editor-focus",function(e){var i,s;if(9===e.keyCode&&!e.ctrlKey&&!e.altKey&&!e.shiftKey){if(i="undefined"!=typeof tinymce&&tinymce.get("content"),s=t("#content"),i&&!i.isHidden())i.focus();else{if(!s.length)return;s.focus()}e.preventDefault()}}),t("#auto_draft").val()&&t("#title").blur(function(){var e;this.value&&!t("#edit-slug-box > *").length&&(t("form#post").one("submit",function(){e=!0}),window.setTimeout(function(){!e&&wp.autosave&&wp.autosave.server.triggerSave()},200))}),r.on("autosave-disable-buttons.edit-post",function(){s.addClass("disabled")}).on("autosave-enable-buttons.edit-post",function(){wp.heartbeat&&wp.heartbeat.hasConnectionError()||s.removeClass("disabled")}).on("before-autosave.edit-post",function(){t(".autosave-message").text(postL10n.savingText)}).on("after-autosave.edit-post",function(e,i){t(".autosave-message").text(i.message)}),t(window).on("beforeunload.edit-post",function(){var t="undefined"!=typeof tinymce&&tinymce.get("content");if(t&&!t.isHidden()&&t.isDirty()||wp.autosave&&wp.autosave.server.postChanged())return postL10n.saveAlert}).on("unload.edit-post",function(e){h&&(e.target&&"#document"!=e.target.nodeName||t.ajax({type:"POST",url:ajaxurl,async:!1,data:{action:"wp-remove-post-lock",_wpnonce:t("#_wpnonce").val(),post_ID:t("#post_ID").val(),active_post_lock:t("#active_post_lock").val()}}))}),t("#tagsdiv-post_tag").length?tagBox.init():t("#side-sortables, #normal-sortables, #advanced-sortables").children("div.postbox").each(function(){if(0===this.id.indexOf("tagsdiv-"))return tagBox.init(),!1}),t(".categorydiv").each(function(){var e,i,s,a,n;(s=t(this).attr("id").split("-")).shift(),a=s.join("-"),n=a+"_tab","category"==a&&(n="cats"),t("a","#"+a+"-tabs").click(function(){var e=t(this).attr("href");return t(this).parent().addClass("tabs").siblings("li").removeClass("tabs"),t("#"+a+"-tabs").siblings(".tabs-panel").hide(),t(e).show(),"#"+a+"-all"==e?deleteUserSetting(n):setUserSetting(n,"pop"),!1}),getUserSetting(n)&&t('a[href="#'+a+'-pop"]',"#"+a+"-tabs").click(),t("#new"+a).one("focus",function(){t(this).val("").removeClass("form-input-tip")}),t("#new"+a).keypress(function(e){13===e.keyCode&&(e.preventDefault(),t("#"+a+"-add-submit").click())}),t("#"+a+"-add-submit").click(function(){t("#new"+a).focus()}),e=function(e){return!!t("#new"+a).val()&&(e.data+="&"+t(":checked","#"+a+"checklist").serialize(),t("#"+a+"-add-submit").prop("disabled",!0),e)},i=function(e,i){var s,n=t("#new"+a+"_parent");t("#"+a+"-add-submit").prop("disabled",!1),"undefined"!=i.parsed.responses[0]&&(s=i.parsed.responses[0].supplemental.newcat_parent)&&(n.before(s),n.remove())},t("#"+a+"checklist").wpList({alt:"",response:a+"-ajax-response",addBefore:e,addAfter:i}),t("#"+a+"-add-toggle").click(function(){return t("#"+a+"-adder").toggleClass("wp-hidden-children"),t('a[href="#'+a+'-all"]',"#"+a+"-tabs").click(),t("#new"+a).focus(),!1}),t("#"+a+"checklist, #"+a+"checklist-pop").on("click",'li.popular-category > label input[type="checkbox"]',function(){var e=t(this),i=e.is(":checked"),s=e.val();s&&e.parents("#taxonomy-"+a).length&&t("#in-"+a+"-"+s+", #in-popular-"+a+"-"+s).prop("checked",i)})}),t("#postcustom").length&&t("#the-list").wpList({addAfter:function(){t("table#list-table").show()},addBefore:function(e){return e.data+="&post_id="+t("#post_ID").val(),e}}),t("#submitdiv").length&&(e=t("#timestamp").html(),i=t("#post-visibility-display").html(),a=function(){"public"!=v.find("input:radio:checked").val()?(t("#sticky").prop("checked",!1),t("#sticky-span").hide()):t("#sticky-span").show(),"password"!=v.find("input:radio:checked").val()?t("#password-span").hide():t("#password-span").show()},n=function(){if(!f.length)return!0;var i,s,a,n,o=t("#post_status"),l=t('option[value="publish"]',o),c=t("#aa").val(),r=t("#mm").val(),p=t("#jj").val(),d=t("#hh").val(),u=t("#mn").val();return i=new Date(c,r-1,p,d,u),s=new Date(t("#hidden_aa").val(),t("#hidden_mm").val()-1,t("#hidden_jj").val(),t("#hidden_hh").val(),t("#hidden_mn").val()),a=new Date(t("#cur_aa").val(),t("#cur_mm").val()-1,t("#cur_jj").val(),t("#cur_hh").val(),t("#cur_mn").val()),i.getFullYear()!=c||1+i.getMonth()!=r||i.getDate()!=p||i.getMinutes()!=u?(f.find(".timestamp-wrap").addClass("form-invalid"),!1):(f.find(".timestamp-wrap").removeClass("form-invalid"),i>a&&"future"!=t("#original_post_status").val()?(n=postL10n.publishOnFuture,t("#publish").val(postL10n.schedule)):i<=a&&"publish"!=t("#original_post_status").val()?(n=postL10n.publishOn,t("#publish").val(postL10n.publish)):(n=postL10n.publishOnPast,t("#publish").val(postL10n.update)),s.toUTCString()==i.toUTCString()?t("#timestamp").html(e):t("#timestamp").html(n+" <b>"+postL10n.dateFormat.replace("%1$s",t('option[value="'+t("#mm").val()+'"]',"#mm").text()).replace("%2$s",p).replace("%3$s",c).replace("%4$s",d).replace("%5$s",u)+"</b> "),"private"==v.find("input:radio:checked").val()?(t("#publish").val(postL10n.update),0===l.length?o.append('<option value="publish">'+postL10n.privatelyPublished+"</option>"):l.html(postL10n.privatelyPublished),t('option[value="publish"]',o).prop("selected",!0),t("#misc-publishing-actions .edit-post-status").hide()):("future"==t("#original_post_status").val()||"draft"==t("#original_post_status").val()?l.length&&(l.remove(),o.val(t("#hidden_post_status").val())):l.html(postL10n.published),o.is(":hidden")&&t("#misc-publishing-actions .edit-post-status").show()),t("#post-status-display").html(t("option:selected",o).text()),"private"==t("option:selected",o).val()||"publish"==t("option:selected",o).val()?t("#save-post").hide():(t("#save-post").show(),"pending"==t("option:selected",o).val()?t("#save-post").show().val(postL10n.savePending):t("#save-post").show().val(postL10n.saveDraft)),!0)},t("#visibility .edit-visibility").click(function(){return v.is(":hidden")&&(a(),v.slideDown("fast").find('input[type="radio"]').first().focus(),t(this).hide()),!1}),v.find(".cancel-post-visibility").click(function(e){v.slideUp("fast"),t("#visibility-radio-"+t("#hidden-post-visibility").val()).prop("checked",!0),t("#post_password").val(t("#hidden-post-password").val()),t("#sticky").prop("checked",t("#hidden-post-sticky").prop("checked")),t("#post-visibility-display").html(i),t("#visibility .edit-visibility").show().focus(),n(),e.preventDefault()}),v.find(".save-post-visibility").click(function(e){v.slideUp("fast"),t("#visibility .edit-visibility").show(),n(),"public"!=v.find("input:radio:checked").val()&&t("#sticky").prop("checked",!1),o=t("#sticky").prop("checked")?"Sticky":"",t("#post-visibility-display").html(postL10n[v.find("input:radio:checked").val()+o]),e.preventDefault()}),v.find("input:radio").change(function(){a()}),f.siblings("a.edit-timestamp").click(function(e){f.is(":hidden")&&(f.slideDown("fast"),t("#mm").focus(),t(this).hide()),e.preventDefault()}),f.find(".cancel-timestamp").click(function(e){f.slideUp("fast").siblings("a.edit-timestamp").show().focus(),t("#mm").val(t("#hidden_mm").val()),t("#jj").val(t("#hidden_jj").val()),t("#aa").val(t("#hidden_aa").val()),t("#hh").val(t("#hidden_hh").val()),t("#mn").val(t("#hidden_mn").val()),n(),e.preventDefault()}),f.find(".save-timestamp").click(function(t){n()&&(f.slideUp("fast"),f.siblings("a.edit-timestamp").show()),t.preventDefault()}),t("#post").on("submit",function(e){n()||(e.preventDefault(),f.show(),wp.autosave&&wp.autosave.enableButtons(),t("#publishing-action .spinner").hide())}),m.siblings("a.edit-post-status").click(function(e){m.is(":hidden")&&(m.slideDown("fast").find("select").focus(),t(this).hide()),e.preventDefault()}),m.find(".save-post-status").click(function(t){m.slideUp("fast").siblings("a.edit-post-status").show(),n(),t.preventDefault()}),m.find(".cancel-post-status").click(function(e){t("#post-status-select").slideUp("fast").siblings("a.edit-post-status").show().focus(),t("#post_status").val(t("#hidden_post_status").val()),n(),e.preventDefault()})),p.length&&p.on("click",function(e){var i=t(e.target);(i.is("#editable-post-name")||i.hasClass("edit-slug"))&&function(){var e,i,s=0,a=t("#editable-post-name"),n=a.html(),o=t("#post_name"),l=o.val(),c=t("#edit-slug-buttons"),r=c.html(),p=t("#editable-post-name-full").html();for(t("#view-post-btn").hide(),c.html('<a href="#" class="save button button-small">'+postL10n.ok+'</a> <a class="cancel" href="#">'+postL10n.cancel+"</a>"),c.children(".save").click(function(){var e=a.children("input").val();return e==t("#editable-post-name-full").text()?(c.children(".cancel").click(),!1):(t.post(ajaxurl,{action:"sample-permalink",post_id:d,new_slug:e,new_title:t("#title").val(),samplepermalinknonce:t("#samplepermalinknonce").val()},function(i){var s=t("#edit-slug-box");s.html(i),s.hasClass("hidden")&&s.fadeIn("fast",function(){s.removeClass("hidden")}),c.html(r),o.val(e),t("#view-post-btn").show()}),!1)}),c.children(".cancel").click(function(){return t("#view-post-btn").show(),a.html(n),c.html(r),o.val(l),!1}),e=0;e<p.length;++e)"%"==p.charAt(e)&&s++;i=s>p.length/4?"":p,a.html('<input type="text" id="new-post-slug" value="'+i+'" />').children("input").keypress(function(t){var e=t.keyCode||0;return 13==e?(c.children(".save").click(),!1):27==e?(c.children(".cancel").click(),!1):void 0}).keyup(function(){o.val(this.value)}).focus()}()}),"undefined"!=typeof wpWordCount&&(r.triggerHandler("wpcountwords",[c.val()]),c.keyup(function(t){var e=t.keyCode||t.charCode;return e==l||(13!=e&&8!=l&&46!=l||r.triggerHandler("wpcountwords",[c.val()]),l=e,!0)})),(wptitlehint=function(e){var i=t("#"+(e=e||"title")),s=t("#"+e+"-prompt-text");""===i.val()&&s.removeClass("screen-reader-text"),s.click(function(){t(this).addClass("screen-reader-text"),i.focus()}),i.blur(function(){""===this.value&&s.removeClass("screen-reader-text")}).focus(function(){s.addClass("screen-reader-text")}).keydown(function(e){s.addClass("screen-reader-text"),t(this).unbind(e)})})(),function(){function e(t){c.hasClass("wp-editor-expand")||(n?s.theme.resizeTo(null,a+t.pageY):o.height(Math.max(50,a+t.pageY)),t.preventDefault())}function i(){var e,i;c.hasClass("wp-editor-expand")||(n?(s.focus(),((i=parseInt(t("#wp-content-editor-container .mce-toolbar-grp").height(),10))<10||i>200)&&(i=30),e=parseInt(t("#content_ifr").css("height"),10)+i-28):(o.focus(),e=parseInt(o.css("height"),10)),r.off(".wp-editor-resize"),e&&e>50&&e<5e3&&setUserSetting("ed_size",e))}var s,a,n,o=t("textarea#content"),l=t("#post-status-info"),c=t("#postdivrich");!o.length||"ontouchstart"in window?t("#content-resize-handle").hide():l.on("mousedown.wp-editor-resize",function(l){"undefined"!=typeof tinymce&&(s=tinymce.get("content")),s&&!s.isHidden()?(n=!0,a=t("#content_ifr").height()-l.pageY):(n=!1,a=o.height()-l.pageY,o.blur()),r.on("mousemove.wp-editor-resize",e).on("mouseup.wp-editor-resize mouseleave.wp-editor-resize",i),l.preventDefault()}).on("mouseup.wp-editor-resize",i)}(),"undefined"!=typeof tinymce&&t("#post-formats-select input.post-format").on("change.set-editor-class",function(){var e,i,s=this.id;s&&t(this).prop("checked")&&(e=tinymce.get("content"))&&((i=e.getBody()).className=i.className.replace(/\bpost-format-[^ ]+/,""),e.dom.addClass(i,"post-format-0"==s?"post-format-standard":s),t(document).trigger("editor-classchange"))})});