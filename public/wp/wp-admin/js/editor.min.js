window.switchEditors={switchto:function(e){var t=e.id,r=t.length,n=t.substr(0,r-5),p=t.substr(r-4);this.go(n,p)},go:function(e,t){function r(){var e=l.select(".mce-toolbar-grp",n.getContainer())[0],t=e&&e.clientHeight;return t&&t>10&&t<200?parseInt(t,10):30}var n,p,i,a,c,l=tinymce.DOM;if(e=e||"content",t=t||"toggle",n=tinymce.get(e),p="wp-"+e+"-wrap",i=l.get(e),"toggle"===t&&(t=n&&!n.isHidden()?"html":"tmce"),"tmce"===t||"tinymce"===t){if(n&&!n.isHidden())return!1;"undefined"!=typeof QTags&&QTags.closeAllTags(e),c=i?parseInt(i.style.height,10):0,tinyMCEPreInit.mceInit[e]&&tinyMCEPreInit.mceInit[e].wpautop&&(i.value=this.wpautop(i.value)),n?(n.show(),!tinymce.Env.iOS&&c&&(c=c-r()+14)>50&&c<5e3&&n.theme.resizeTo(null,c)):tinymce.init(tinyMCEPreInit.mceInit[e]),l.removeClass(p,"html-active"),l.addClass(p,"tmce-active"),setUserSetting("editor","tinymce")}else if("html"===t){if(n&&n.isHidden())return!1;n?(tinymce.Env.iOS||(c=(a=l.get(e+"_ifr"))?parseInt(a.style.height,10):0)&&(c=c+r()-14)>50&&c<5e3&&(i.style.height=c+"px"),n.hide()):(tinyMCEPreInit.mceInit[e]&&tinyMCEPreInit.mceInit[e].wpautop&&(i.value=this.pre_wpautop(i.value)),l.setStyles(i,{display:"",visibility:""})),l.removeClass(p,"tmce-active"),l.addClass(p,"html-active"),setUserSetting("editor","html")}return!1},_wp_Nop:function(e){var t,r,n=!1,p=!1;return-1===e.indexOf("<pre")&&-1===e.indexOf("<script")||(n=!0,e=e.replace(/<(pre|script)[^>]*>[\s\S]+?<\/\1>/g,function(e){return e=e.replace(/<br ?\/?>(\r\n|\n)?/g,"<wp-line-break>"),(e=e.replace(/<\/?p( [^>]*)?>(\r\n|\n)?/g,"<wp-line-break>")).replace(/\r?\n/g,"<wp-line-break>")})),-1!==e.indexOf("[caption")&&(p=!0,e=e.replace(/\[caption[\s\S]+?\[\/caption\]/g,function(e){return e.replace(/<br([^>]*)>/g,"<wp-temp-br$1>").replace(/[\r\n\t]+/,"")})),t="blockquote|ul|ol|li|table|thead|tbody|tfoot|tr|th|td|div|h[1-6]|p|fieldset",e=e.replace(new RegExp("\\s*</("+t+")>\\s*","g"),"</$1>\n"),e=e.replace(new RegExp("\\s*<((?:"+t+")(?: [^>]*)?)>","g"),"\n<$1>"),e=e.replace(/(<p [^>]+>.*?)<\/p>/g,"$1</p#>"),e=e.replace(/<div( [^>]*)?>\s*<p>/gi,"<div$1>\n\n"),e=e.replace(/\s*<p>/gi,""),e=e.replace(/\s*<\/p>\s*/gi,"\n\n"),e=e.replace(/\n[\s\u00a0]+\n/g,"\n\n"),e=e.replace(/\s*<br ?\/?>\s*/gi,"\n"),e=e.replace(/\s*<div/g,"\n<div"),e=e.replace(/<\/div>\s*/g,"</div>\n"),e=e.replace(/\s*\[caption([^\[]+)\[\/caption\]\s*/gi,"\n\n[caption$1[/caption]\n\n"),e=e.replace(/caption\]\n\n+\[caption/g,"caption]\n\n[caption"),r="blockquote|ul|ol|li|table|thead|tbody|tfoot|tr|th|td|h[1-6]|pre|fieldset",e=e.replace(new RegExp("\\s*<((?:"+r+")(?: [^>]*)?)\\s*>","g"),"\n<$1>"),e=e.replace(new RegExp("\\s*</("+r+")>\\s*","g"),"</$1>\n"),-1!==(e=e.replace(/<li([^>]*)>/g,"\t<li$1>")).indexOf("<option")&&(e=(e=e.replace(/\s*<option/g,"\n<option")).replace(/\s*<\/select>/g,"\n</select>")),-1!==e.indexOf("<hr")&&(e=e.replace(/\s*<hr( [^>]*)?>\s*/g,"\n\n<hr$1>\n\n")),-1!==e.indexOf("<object")&&(e=e.replace(/<object[\s\S]+?<\/object>/g,function(e){return e.replace(/[\r\n]+/g,"")})),e=e.replace(/<\/p#>/g,"</p>\n"),e=e.replace(/\s*(<p [^>]+>[\s\S]*?<\/p>)/g,"\n$1"),e=e.replace(/^\s+/,""),e=e.replace(/[\s\u00a0]+$/,""),n&&(e=e.replace(/<wp-line-break>/g,"\n")),p&&(e=e.replace(/<wp-temp-br([^>]*)>/g,"<br$1>")),e},_wp_Autop:function(e){var t=!1,r=!1,n="table|thead|tfoot|caption|col|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|pre|form|map|area|blockquote|address|math|style|p|h[1-6]|hr|fieldset|legend|section|article|aside|hgroup|header|footer|nav|figure|details|menu|summary";return-1!==e.indexOf("<object")&&(e=e.replace(/<object[\s\S]+?<\/object>/g,function(e){return e.replace(/[\r\n]+/g,"")})),-1===(e=e.replace(/<[^<>]+>/g,function(e){return e.replace(/[\r\n]+/g," ")})).indexOf("<pre")&&-1===e.indexOf("<script")||(t=!0,e=e.replace(/<(pre|script)[^>]*>[\s\S]+?<\/\1>/g,function(e){return e.replace(/(\r\n|\n)/g,"<wp-line-break>")})),-1!==e.indexOf("[caption")&&(r=!0,e=e.replace(/\[caption[\s\S]+?\[\/caption\]/g,function(e){return e=e.replace(/<br([^>]*)>/g,"<wp-temp-br$1>"),(e=e.replace(/<[a-zA-Z0-9]+( [^<>]+)?>/g,function(e){return e.replace(/[\r\n\t]+/," ")})).replace(/\s*\n\s*/g,"<wp-temp-br />")})),e+="\n\n",e=e.replace(/<br \/>\s*<br \/>/gi,"\n\n"),e=e.replace(new RegExp("(<(?:"+n+")(?: [^>]*)?>)","gi"),"\n$1"),e=e.replace(new RegExp("(</(?:"+n+")>)","gi"),"$1\n\n"),e=e.replace(/<hr( [^>]*)?>/gi,"<hr$1>\n\n"),e=e.replace(/\s*<option/gi,"<option"),e=e.replace(/<\/option>\s*/gi,"</option>"),e=e.replace(/\r\n|\r/g,"\n"),e=e.replace(/\n\s*\n+/g,"\n\n"),e=e.replace(/([\s\S]+?)\n\n/g,"<p>$1</p>\n"),e=e.replace(/<p>\s*?<\/p>/gi,""),e=e.replace(new RegExp("<p>\\s*(</?(?:"+n+")(?: [^>]*)?>)\\s*</p>","gi"),"$1"),e=e.replace(/<p>(<li.+?)<\/p>/gi,"$1"),e=e.replace(/<p>\s*<blockquote([^>]*)>/gi,"<blockquote$1><p>"),e=e.replace(/<\/blockquote>\s*<\/p>/gi,"</p></blockquote>"),e=e.replace(new RegExp("<p>\\s*(</?(?:"+n+")(?: [^>]*)?>)","gi"),"$1"),e=e.replace(new RegExp("(</?(?:"+n+")(?: [^>]*)?>)\\s*</p>","gi"),"$1"),e=e.replace(/\s*\n/gi,"<br />\n"),e=e.replace(new RegExp("(</?(?:"+n+")[^>]*>)\\s*<br />","gi"),"$1"),e=e.replace(/<br \/>(\s*<\/?(?:p|li|div|dl|dd|dt|th|pre|td|ul|ol)>)/gi,"$1"),e=e.replace(/(?:<p>|<br ?\/?>)*\s*\[caption([^\[]+)\[\/caption\]\s*(?:<\/p>|<br ?\/?>)*/gi,"[caption$1[/caption]"),e=e.replace(/(<(?:div|th|td|form|fieldset|dd)[^>]*>)(.*?)<\/p>/g,function(e,t,r){return r.match(/<p( [^>]*)?>/)?e:t+"<p>"+r+"</p>"}),t&&(e=e.replace(/<wp-line-break>/g,"\n")),r&&(e=e.replace(/<wp-temp-br([^>]*)>/g,"<br$1>")),e},pre_wpautop:function(e){var t={o:this,data:e,unfiltered:e},r="undefined"!=typeof jQuery;return r&&jQuery("body").trigger("beforePreWpautop",[t]),t.data=this._wp_Nop(t.data),r&&jQuery("body").trigger("afterPreWpautop",[t]),t.data},wpautop:function(e){var t={o:this,data:e,unfiltered:e},r="undefined"!=typeof jQuery;return r&&jQuery("body").trigger("beforeWpautop",[t]),t.data=this._wp_Autop(t.data),r&&jQuery("body").trigger("afterWpautop",[t]),t.data}};