!function(e){function s(){"function"==typeof zxcvbn?(l.val()?(n(),i()):(l.val(l.data("pw")),l.trigger("pwupdate"),i()),1!==parseInt(f.data("start-masked"),10)?r.addClass("show-password"):f.trigger("click"),e("#pw-weak-text-label").html(userProfileL10n.warnWeak)):setTimeout(s,50)}function a(){f.data("toggle",0).attr({"aria-label":userProfileL10n.ariaHide}).find(".text").text(userProfileL10n.hide).end().find(".dashicons").removeClass("dashicons-visibility").addClass("dashicons-hidden"),d.focus(),p.attr("for","pass1-text")}function t(){var t,n;o=e(".user-pass1-wrap"),p=o.find("th label").attr("for","pass1-text"),e(".user-pass2-wrap").hide(),w=e("#submit, #wp-submit").on("click",function(){b=!1}),v=w.add(" #createusersub"),u=e(".pw-weak"),(h=u.find(".pw-checkbox")).change(function(){v.prop("disabled",!h.prop("checked"))}),(l=e("#pass1")).length&&(m=l.val(),r=l.parent(),d=e('<input type="text"/>').attr({id:"pass1-text",name:"pass1-text",autocomplete:"off"}).addClass(l[0].className).data("pw",l.data("pw")).val(l.val()).on(g,function(){d.val()!==m&&(c.val(d.val()),l.val(d.val()).trigger("pwupdate"),m=d.val())}),l.after(d),1===parseInt(l.data("reveal"),10)&&s(),l.on(g+" pwupdate",function(){l.val()!==m&&(m=l.val(),d.val()!==m&&d.val(m),l.add(d).removeClass("short bad good strong"),i())})),c=e("#pass2").on(g,function(){c.val().length>0&&(l.val(c.val()),c.val(""),m="",l.trigger("pwupdate"))}),l.is(":hidden")&&(l.prop("disabled",!0),c.prop("disabled",!0),d.prop("disabled",!0)),t=o.find(".wp-pwd"),n=o.find("button.wp-generate-pw"),(f=o.find(".wp-hide-pw")).show().on("click",function(){1===parseInt(f.data("toggle"),10)?(r.addClass("show-password"),a(),_.isUndefined(d[0].setSelectionRange)||d[0].setSelectionRange(0,100)):(r.removeClass("show-password"),f.data("toggle",1).attr({"aria-label":userProfileL10n.ariaShow}).find(".text").text(userProfileL10n.show).end().find(".dashicons").removeClass("dashicons-hidden").addClass("dashicons-visibility"),l.focus(),p.attr("for","pass1"),_.isUndefined(l[0].setSelectionRange)||l[0].setSelectionRange(0,100))}),n.length&&t.hide(),n.show(),n.on("click",function(){b=!0,n.hide(),t.show(),l.attr("disabled",!1),c.attr("disabled",!1),d.attr("disabled",!1),0===d.val().length&&s(),_.defer(function(){d.focus(),_.isUndefined(d[0].setSelectionRange)||d[0].setSelectionRange(0,100)},0)}),o.find("button.wp-cancel-pw").on("click",function(){b=!1,d.val(""),wp.ajax.post("generate-password").done(function(e){l.data("pw",e)}),n.show(),t.hide(),u.hide(0,function(){h.removeProp("checked")}),l.prop("disabled",!0),c.prop("disabled",!0),d.prop("disabled",!0),a(),o.closest("form").is("#your-profile")&&(l.val("").trigger("pwupdate"),v.prop("disabled",!1))}),o.closest("form").on("submit",function(){b=!1,l.prop("disabled",!1),c.prop("disabled",!1),c.val(l.val()),r.removeClass("show-password")})}function n(){var s=e("#pass1").val();if(e("#pass-strength-result").removeClass("short bad good strong"),s)switch(wp.passwordStrength.meter(s,wp.passwordStrength.userInputBlacklist(),s)){case-1:e("#pass-strength-result").addClass("bad").html(pwsL10n.unknown);break;case 2:e("#pass-strength-result").addClass("bad").html(pwsL10n.bad);break;case 3:e("#pass-strength-result").addClass("good").html(pwsL10n.good);break;case 4:e("#pass-strength-result").addClass("strong").html(pwsL10n.strong);break;case 5:e("#pass-strength-result").addClass("short").html(pwsL10n.mismatch);break;default:e("#pass-strength-result").addClass("short").html(pwsL10n.short)}else e("#pass-strength-result").html("&nbsp;")}function i(){var s=e("#pass-strength-result")[0];s.className&&(l.add(d).addClass(s.className),e(s).is(".short, .bad")?(h.prop("checked")||v.prop("disabled",!0),u.show()):(v.prop("disabled",!1),u.hide()))}var o,r,l,d,p,c,u,h,f,v,w,m,g,b=!1;g="oninput"in document.createElement("input")?"input":"keyup",e(document).ready(function(){var s,a,i,o,r=e("#display_name"),l=r.val(),d=e("#wp-admin-bar-my-account").find(".display-name");e("#pass1").val("").on(g+" pwupdate",n),e("#pass-strength-result").show(),e(".color-palette").click(function(){e(this).siblings('input[name="admin_color"]').prop("checked",!0)}),r.length&&(e("#first_name, #last_name, #nickname").bind("blur.user_profile",function(){var s=[],a={display_nickname:e("#nickname").val()||"",display_username:e("#user_login").val()||"",display_firstname:e("#first_name").val()||"",display_lastname:e("#last_name").val()||""};a.display_firstname&&a.display_lastname&&(a.display_firstlast=a.display_firstname+" "+a.display_lastname,a.display_lastfirst=a.display_lastname+" "+a.display_firstname),e.each(e("option",r),function(e,a){s.push(a.value)}),e.each(a,function(t,n){if(n){var i=n.replace(/<\/?[a-z][^>]*>/gi,"");a[t].length&&-1===e.inArray(i,s)&&(s.push(i),e("<option />",{text:i}).appendTo(r))}})}),r.on("change",function(){if(i===o){var s=e.trim(this.value)||l;d.text(s)}})),s=e("#color-picker"),a=e("#colors-css"),i=e("input#user_id").val(),o=e('input[name="checkuser_id"]').val(),s.on("click.colorpicker",".color-option",function(){var s,t=e(this);if(!t.hasClass("selected")&&(t.siblings(".selected").removeClass("selected"),t.addClass("selected").find('input[type="radio"]').prop("checked",!0),i===o)){if(0===a.length&&(a=e('<link rel="stylesheet" />').appendTo("head")),a.attr("href",t.children(".css_url").val()),"undefined"!=typeof wp&&wp.svgPainter){try{s=e.parseJSON(t.children(".icon_colors").val())}catch(e){}s&&(wp.svgPainter.setColors(s),wp.svgPainter.paint())}e.post(ajaxurl,{action:"save-user-color-scheme",color_scheme:t.children('input[name="admin_color"]').val(),nonce:e("#color-nonce").val()}).done(function(s){s.success&&e("body").removeClass(s.data.previousScheme).addClass(s.data.currentScheme)})}}),t()}),e("#destroy-sessions").on("click",function(s){var a=e(this);wp.ajax.post("destroy-sessions",{nonce:e("#_wpnonce").val(),user_id:e("#user_id").val()}).done(function(e){a.prop("disabled",!0),a.siblings(".notice").remove(),a.before('<div class="notice notice-success inline"><p>'+e.message+"</p></div>")}).fail(function(e){a.siblings(".notice").remove(),a.before('<div class="notice notice-error inline"><p>'+e.message+"</p></div>")}),s.preventDefault()}),window.generatePassword=s,e(window).on("beforeunload",function(){if(!0===b)return userProfileL10n.warn})}(jQuery);