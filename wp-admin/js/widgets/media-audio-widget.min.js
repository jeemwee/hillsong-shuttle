!function(e){"use strict";var t,d,i;i=wp.media.view.MediaFrame.AudioDetails.extend({createStates:function(){this.states.add([new wp.media.controller.AudioDetails({media:this.media}),new wp.media.controller.MediaLibrary({type:"audio",id:"add-audio-source",title:wp.media.view.l10n.audioAddSourceTitle,toolbar:"add-audio-source",media:this.media,menu:!1})])}}),t=e.MediaWidgetModel.extend({}),d=e.MediaWidgetControl.extend({showDisplaySettings:!1,mapModelToMediaFrameProps:function(t){var d;return d=e.MediaWidgetControl.prototype.mapModelToMediaFrameProps.call(this,t),d.link="embed",d},renderPreview:function(){var e,t,d,i;d=this.model.get("attachment_id"),i=this.model.get("url"),(d||i)&&(e=this.$el.find(".media-widget-preview"),t=wp.template("wp-media-widget-audio-preview"),e.html(t({model:{attachment_id:this.model.get("attachment_id"),src:i},error:this.model.get("error")})),wp.mediaelement.initialize())},editMedia:function(){var e,t,d,a=this;t=a.mapModelToMediaFrameProps(a.model.toJSON()),e=new i({frame:"audio",state:"audio-details",metadata:t}),wp.media.frame=e,e.$el.addClass("media-widget"),d=function(e){a.selectedAttachment.set(e),a.model.set(_.extend(a.model.defaults(),a.mapMediaToModelProps(e),{error:!1}))},e.state("audio-details").on("update",d),e.state("replace-audio").on("replace",d),e.on("close",function(){e.detach()}),e.open()}}),e.controlConstructors.media_audio=d,e.modelConstructors.media_audio=t}(wp.mediaWidgets);