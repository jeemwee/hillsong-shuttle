!function(e,t,n){e.PluginManager.add("wpemoji",function(o){function i(e){t.emoji.parse(e,{imgAttr:{"data-mce-resize":"false","data-mce-placeholder":"1","data-wp-emoji":"1"}})}function a(e){var t,n;e&&window.twemoji&&window.twemoji.test(e.textContent||e.innerText)&&(c.webkit&&(n=(t=o.selection).getBookmark()),i(e),c.webkit&&t.moveToBookmark(n))}var w,c=e.Env,d=window.navigator.userAgent,m=d.indexOf("Windows")>-1,r=function(){var e=d.match(/Windows NT 6\.(\d)/);return!!(e&&e[1]>1)}();t&&t.emoji&&!n.supports.everything&&(r?o.on("keyup",function(e){231===e.keyCode&&a(o.selection.getNode())}):m||(o.on("keydown keyup",function(e){w="keydown"===e.type}),o.on("input",function(){w||a(o.selection.getNode())})),o.on("setcontent",function(e){var t=o.selection,n=t.getNode();window.twemoji&&window.twemoji.test(n.textContent||n.innerText)&&(i(n),c.ie&&c.ie<9&&e.load&&n&&"BODY"===n.nodeName&&t.collapse(!0))}),o.on("PastePostProcess",function(t){window.twemoji&&e.each(o.dom.$("img.emoji",t.node),function(e){e.alt&&window.twemoji.test(e.alt)&&function(e){e.className="emoji",e.setAttribute("data-mce-resize","false"),e.setAttribute("data-mce-placeholder","1"),e.setAttribute("data-wp-emoji","1")}(e)})}),o.on("postprocess",function(e){e.content&&(e.content=e.content.replace(/<img[^>]+data-wp-emoji="[^>]+>/g,function(e){var t=e.match(/alt="([^"]+)"/);return t&&t[1]?t[1]:e}))}),o.on("resolvename",function(e){"IMG"===e.target.nodeName&&o.dom.getAttrib(e.target,"data-wp-emoji")&&e.preventDefault()}))})}(window.tinymce,window.wp,window._wpemojiSettings);