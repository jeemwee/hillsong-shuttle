window.autosave=function(){return!0},function(t,e){function n(){function n(e){var n,o,a,i=(new Date).getTime(),r=[],c=s();return c&&c.isDirty()&&!c.isHidden()&&i-3e3>p&&(c.save(),p=i),a={post_id:t("#post_ID").val()||0,post_type:t("#post_type").val()||"",post_author:t("#post_author").val()||"",post_title:t("#title").val()||"",content:t("#content").val()||"",excerpt:t("#excerpt").val()||""},"local"===e?a:(t('input[id^="in-category-"]:checked').each(function(){r.push(this.value)}),a.catslist=r.join(","),(n=t("#post_name").val())&&(a.post_name=n),(o=t("#parent_id").val())&&(a.parent_id=o),t("#comment_status").prop("checked")&&(a.comment_status="open"),t("#ping_status").prop("checked")&&(a.ping_status="open"),"1"===t("#auto_draft").val()&&(a.auto_draft="1"),a)}function o(e){return"object"==typeof e?(e.post_title||"")+"::"+(e.content||"")+"::"+(e.excerpt||""):(t("#title").val()||"")+"::"+(t("#content").val()||"")+"::"+(t("#excerpt").val()||"")}function a(){l.trigger("autosave-disable-buttons"),setTimeout(i,5e3)}function i(){l.trigger("autosave-enable-buttons")}function s(){return"undefined"!=typeof tinymce&&tinymce.get("content")}function r(){function a(){var t=!1;return g&&f&&(t=(t=sessionStorage.getItem("wp-autosave-"+f))?JSON.parse(t):{}),t}function i(){var t=a();return!(!t||!d)&&(t["post_"+d]||!1)}function r(t){var e=a();if(!e||!d)return!1;if(t)e["post_"+d]=t;else{if(!e.hasOwnProperty("post_"+d))return!1;delete e["post_"+d]}return function(t){var e;return!(!g||!f)&&(e="wp-autosave-"+f,sessionStorage.setItem(e,JSON.stringify(t)),null!==sessionStorage.getItem(e))}(e)}function c(e){var a,s,c=!1;return!(h||!g)&&(e?(a=i()||{},t.extend(a,e)):a=n("local"),s=o(a),void 0===m&&(m=u),s!==m&&(a.save_time=(new Date).getTime(),a.status=t("#post_status").val()||"",(c=r(a))&&(m=s),c))}function p(t,e){function n(t){return t.toString().replace(/[\x20\t\r\n\f]+/g,"")}return n(t||"")===n(e||"")}function v(){var e,n,a,c,u=i(),l=wpCookies.get("wp-saving-post"),v=t("#has-newer-autosave").parent(".notice"),f=t(".wp-header-end");if(l===d+"-saved")return wpCookies.remove("wp-saving-post"),void r(!1);u&&(e=t("#content").val()||"",n=t("#title").val()||"",a=t("#excerpt").val()||"",p(e,u.content)&&p(n,u.post_title)&&p(a,u.excerpt)||(f.length||(f=t(".wrap h1, .wrap h2").first()),c=t("#local-storage-notice").insertAfter(f).addClass("notice-warning"),v.length?v.slideUp(150,function(){c.slideDown(150)}):c.slideDown(200),c.find(".restore-backup").on("click.autosave-local",function(){!function(e){var n;if(e)return m=o(e),t("#title").val()!==e.post_title&&t("#title").focus().val(e.post_title||""),t("#excerpt").val(e.excerpt||""),(n=s())&&!n.isHidden()&&"undefined"!=typeof switchEditors?(n.settings.wpautop&&e.content&&(e.content=switchEditors.wpautop(e.content)),n.undoManager.transact(function(){n.setContent(e.content||""),n.nodeChanged()})):(t("#content-html").click(),t("#content").focus(),document.execCommand("selectAll"),document.execCommand("insertText",!1,e.content||"")),!0}(u),c.fadeTo(250,0,function(){c.slideUp(150)})})))}var f,d,g,w,m,h=!1;return f=void 0!==e.autosaveL10n&&e.autosaveL10n.blog_id,function(){var t=Math.random().toString(),n=!1;try{e.sessionStorage.setItem("wp-test",t),n=e.sessionStorage.getItem("wp-test")===t,e.sessionStorage.removeItem("wp-test")}catch(t){}return g=n,n}()&&f&&(t("#content").length||t("#excerpt").length)&&l.ready(function(){d=t("#post_ID").val()||0,t("#wp-content-wrap").hasClass("tmce-active")?l.on("tinymce-editor-init.autosave",function(){e.setTimeout(function(){v()},1500)}):v(),w=e.setInterval(c,15e3),t("form#post").on("submit.autosave-local",function(){var n=s(),o=t("#post_ID").val()||0;n&&!n.isHidden()?n.on("submit",function(){c({post_title:t("#title").val()||"",content:t("#content").val()||"",excerpt:t("#excerpt").val()||""})}):c({post_title:t("#title").val()||"",content:t("#content").val()||"",excerpt:t("#excerpt").val()||""});var a="https:"===e.location.protocol;wpCookies.set("wp-saving-post",o+"-check",86400,!1,!1,a)})}),{hasStorage:g,getSavedPostData:i,save:c,suspend:function(){h=!0},resume:function(){h=!1}}}function c(){function s(){c=!0,e.clearTimeout(p),p=e.setTimeout(function(){c=!1},1e4)}function r(){d=(new Date).getTime()+1e3*autosaveL10n.autosaveInterval||6e4}var c,p,v,f,d=0,g=!1;return l.on("heartbeat-send.autosave",function(i,r){var p=function(){var i,r;return!(g||c||!e.autosave())&&!((new Date).getTime()<d)&&(i=n(),r=o(i),void 0===f&&(f=u),r!==f&&(v=r,s(),a(),l.trigger("wpcountwords",[i.content]).trigger("before-autosave",[i]),i._wpnonce=t("#_wpnonce").val()||"",i))}();p&&(r.wp_autosave=p)}).on("heartbeat-tick.autosave",function(e,n){n.wp_autosave&&function(e){r(),c=!1,f=v,v="",l.trigger("after-autosave",[e]),i(),e.success&&t("#auto_draft").val("")}(n.wp_autosave)}).on("heartbeat-connection-lost.autosave",function(e,n,o){if("timeout"===n||603===o){var i=t("#lost-connection-notice");wp.autosave.local.hasStorage||i.find(".hide-if-no-sessionstorage").hide(),i.show(),a()}}).on("heartbeat-connection-restored.autosave",function(){t("#lost-connection-notice").hide(),i()}).ready(function(){r()}),{tempBlockSave:s,triggerSave:function(){d=0,wp.heartbeat.connectNow()},postChanged:function(){return o()!==u},suspend:function(){g=!0},resume:function(){g=!1}}}var u,p=0,l=t(document);return l.on("tinymce-editor-init.autosave",function(t,n){"content"===n.id&&e.setTimeout(function(){n.save(),u=o()},1e3)}).ready(function(){u=o()}),{getPostData:n,getCompareString:o,disableButtons:a,enableButtons:i,local:r(),server:c()}}e.wp=e.wp||{},e.wp.autosave=n()}(jQuery,window);